<Window x:Class="SmartSleep.App.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:SmartSleep.App.Models"
        Title="{DynamicResource Settings_Title}"
        Width="660"
        Height="780"
        MinWidth="600"
        MinHeight="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel VerticalAlignment="Top">
                <TextBlock Text="{DynamicResource Settings_Section_CurrentStatus}" FontWeight="Bold" FontSize="14"/>
                <StackPanel Margin="0,8,0,16">
                    <TextBlock Text="{Binding LiveInputStatus}" Foreground="{Binding LiveInputBrush}"/>
                    <TextBlock Text="{Binding LiveCpuStatus}" Margin="0,2,0,0" Foreground="{Binding LiveCpuBrush}"/>
                    <TextBlock Text="{Binding LiveNetworkStatus}" Margin="0,2,0,0" Foreground="{Binding LiveNetworkBrush}"/>
                    <TextBlock Text="{Binding LiveStatusMessage}" Margin="0,4,0,0" Foreground="{Binding LiveStatusBrush}"/>
                </StackPanel>

                <TextBlock Text="{DynamicResource Settings_Section_Monitoring}" FontWeight="Bold" FontSize="14"/>
                <StackPanel Margin="0,8,0,16">
                    <!-- Unified idle time setting -->
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,8">
                        <TextBlock Text="{DynamicResource Settings_IdleTime}" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox Width="80" Margin="8,0,0,0" Text="{Binding IdleTimeSeconds, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Text="seconds" VerticalAlignment="Center" Margin="8,0,0,0" Foreground="Gray"/>
                    </StackPanel>

                    <CheckBox Content="{DynamicResource Settings_UseInputActivity}" IsChecked="{Binding UseInputActivity}"/>
                    <CheckBox Content="{DynamicResource Settings_IncludeGamepadInput}" IsChecked="{Binding IncludeGamepadInput}" IsEnabled="{Binding UseInputActivity}" Margin="24,4,0,0"/>

                    <CheckBox Content="{DynamicResource Settings_UseCpuActivity}" IsChecked="{Binding UseCpuActivity}" Margin="0,12,0,0"/>
                    <StackPanel Orientation="Horizontal" Margin="24,4,0,0">
                        <TextBlock Text="{DynamicResource Settings_CpuThreshold}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" IsEnabled="{Binding UseCpuActivity}" Text="{Binding CpuUsageThreshold, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="24,4,0,0">
                        <TextBlock Text="{DynamicResource Settings_CpuSmoothingWindow}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" IsEnabled="{Binding UseCpuActivity}" Text="{Binding CpuSmoothingWindow, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <CheckBox Content="{DynamicResource Settings_UseNetworkActivity}" IsChecked="{Binding UseNetworkActivity}" Margin="0,12,0,0"/>
                    <StackPanel Orientation="Horizontal" Margin="24,4,0,0">
                        <TextBlock Text="{DynamicResource Settings_NetworkThreshold}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" IsEnabled="{Binding UseNetworkActivity}" Text="{Binding NetworkThreshold, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="24,4,0,0">
                        <TextBlock Text="{DynamicResource Settings_NetworkSmoothingWindow}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" IsEnabled="{Binding UseNetworkActivity}" Text="{Binding NetworkSmoothingWindow, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <TextBlock Text="{DynamicResource Settings_PollingInterval}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" Text="{Binding PollingIntervalSeconds, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="{DynamicResource Settings_Section_Schedule}" FontWeight="Bold" FontSize="14"/>
                <StackPanel Margin="0,8,0,16">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="{DynamicResource Settings_ScheduleModeLabel}" VerticalAlignment="Center"/>
                        <ComboBox Width="180" Margin="8,0,0,0" SelectedValuePath="Tag" SelectedValue="{Binding ScheduleMode}">
                            <ComboBoxItem Content="{DynamicResource Settings_ScheduleMode_Always}" Tag="{x:Static models:ScheduleMode.Always}"/>
                            <ComboBoxItem Content="{DynamicResource Settings_ScheduleMode_Daily}" Tag="{x:Static models:ScheduleMode.Daily}"/>
                            <ComboBoxItem Content="{DynamicResource Settings_ScheduleMode_Weekly}" Tag="{x:Static models:ScheduleMode.Weekly}"/>
                            <ComboBoxItem Content="{DynamicResource Settings_ScheduleMode_Disabled}" Tag="{x:Static models:ScheduleMode.Disabled}"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Margin="0,8,0,0" Visibility="{Binding DailyModeVisible}">
                        <TextBlock Text="{DynamicResource Settings_DailyScheduleHeader}" FontWeight="SemiBold" Margin="0,0,0,4"/>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="{DynamicResource Settings_Schedule_Start}" VerticalAlignment="Center"/>
                            <TextBox Width="100" Margin="8,0,0,0" Text="{Binding DailyStartText, UpdateSourceTrigger=PropertyChanged}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="{DynamicResource Settings_Schedule_End}" VerticalAlignment="Center"/>
                            <TextBox Width="100" Margin="8,0,0,0" Text="{Binding DailyEndText, UpdateSourceTrigger=PropertyChanged}"/>
                        </StackPanel>
                    </StackPanel>

                    <StackPanel Margin="0,8,0,0" Visibility="{Binding WeeklyModeVisible}">
                        <TextBlock Text="{DynamicResource Settings_WeeklyScheduleHeader}" FontWeight="SemiBold" Margin="0,0,0,4"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Monday}" IsChecked="{Binding MondayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding MondayAllDay}" IsEnabled="{Binding MondayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding MondayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding MondayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding MondayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding MondayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Tuesday}" IsChecked="{Binding TuesdayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding TuesdayAllDay}" IsEnabled="{Binding TuesdayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding TuesdayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding TuesdayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding TuesdayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding TuesdayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Wednesday}" IsChecked="{Binding WednesdayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding WednesdayAllDay}" IsEnabled="{Binding WednesdayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding WednesdayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding WednesdayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding WednesdayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding WednesdayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Thursday}" IsChecked="{Binding ThursdayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding ThursdayAllDay}" IsEnabled="{Binding ThursdayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding ThursdayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding ThursdayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding ThursdayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding ThursdayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Friday}" IsChecked="{Binding FridayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding FridayAllDay}" IsEnabled="{Binding FridayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding FridayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding FridayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding FridayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding FridayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Saturday}" IsChecked="{Binding SaturdayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding SaturdayAllDay}" IsEnabled="{Binding SaturdayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding SaturdayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SaturdayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding SaturdayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SaturdayTimeEnabled}"/>
                        </Grid>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="70"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" Content="{DynamicResource Day_Sunday}" IsChecked="{Binding SundayEnabled}"/>
                            <CheckBox Grid.Column="1" Content="{DynamicResource Settings_AllDay}" IsChecked="{Binding SundayAllDay}" IsEnabled="{Binding SundayEnabled}"/>
                            <TextBox Grid.Column="2" Width="70" Text="{Binding SundayStartText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SundayTimeEnabled}"/>
                            <TextBlock Grid.Column="3" Text=" - " VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBox Grid.Column="4" Width="70" Text="{Binding SundayEndText, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SundayTimeEnabled}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="{DynamicResource Settings_Section_Power}" FontWeight="Bold" FontSize="14"/>
                <StackPanel Margin="0,8,0,16">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="{DynamicResource Settings_PowerActionLabel}" VerticalAlignment="Center"/>
                        <ComboBox Width="150" Margin="8,0,0,0" SelectedValuePath="Tag" SelectedValue="{Binding PowerAction}">
                            <ComboBoxItem Content="{DynamicResource PowerAction_Sleep}" Tag="{x:Static models:PowerAction.Sleep}"/>
                            <ComboBoxItem Content="{DynamicResource PowerAction_Shutdown}" Tag="{x:Static models:PowerAction.Shutdown}"/>
                        </ComboBox>
                    </StackPanel>

                    <CheckBox Content="{DynamicResource Settings_ShowConfirmation}" IsChecked="{Binding ShowConfirmationDialog}" Margin="0,8,0,0"/>
                    <StackPanel Orientation="Horizontal" Margin="24,4,0,0" IsEnabled="{Binding ShowConfirmationDialog}">
                        <TextBlock Text="{DynamicResource Settings_ConfirmationCountdown}" VerticalAlignment="Center"/>
                        <TextBox Width="80" Margin="8,0,0,0" Text="{Binding ConfirmationCountdownSeconds, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="{DynamicResource Settings_Section_Misc}" FontWeight="Bold" FontSize="14"/>
                <StackPanel Margin="0,8,0,16">
                    <CheckBox Content="{DynamicResource Settings_StartWithWindows}" IsChecked="{Binding StartWithWindows}"/>
                    <CheckBox Content="{DynamicResource Settings_EnableSleepLogging}" IsChecked="{Binding EnableSleepLogging}" Margin="0,8,0,0"/>
                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <TextBlock Text="{DynamicResource Settings_LanguageLabel}" VerticalAlignment="Center"/>
                        <ComboBox Width="150" Margin="8,0,0,0" SelectedValuePath="Tag" SelectedValue="{Binding Language}">
                            <ComboBoxItem Content="{DynamicResource Settings_Language_English}" Tag="{x:Static models:AppLanguage.English}"/>
                            <ComboBoxItem Content="{DynamicResource Settings_Language_Korean}" Tag="{x:Static models:AppLanguage.Korean}"/>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <DockPanel Grid.Row="1" Margin="0,12,0,0">
            <TextBlock DockPanel.Dock="Top" Foreground="DarkOrange" TextWrapping="Wrap" Text="{Binding StatusMessage}" Margin="0,0,0,12"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="{DynamicResource Settings_Button_Cancel}" Width="80" Margin="0,0,8,0" Click="Cancel_Click"/>
                <Button Content="{DynamicResource Settings_Button_Apply}" Width="80" Margin="0,0,8,0" Click="Apply_Click"/>
                <Button Content="{DynamicResource Settings_Button_Ok}" Width="100" Click="Ok_Click"/>
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
